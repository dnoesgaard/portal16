<div class="m-t-1">
    <div ng-if="vm.state === 'SUCCESS'" class="text-center">
      <div style="font-size: 18px; margin-bottom: 24px;">
        <p>Thank you for submitting your application.</p>
        <p>You can expect to hear back in the next 2 weeks.</p>
        <button ng-click="vm.restart()" class="gb-button--brand">Create a new application</button>
        <div style="width: 100%; padding: 12px 24px; margin: auto;">
          <img src="/img/misc/success.png" style="width: 100%"/>
        </div>
      </div>
    </div>
    <div ng-if="vm.state !== 'SUCCESS'">
        <form name="vm.ednaform">
            <md-card>
                <md-card-title>
                    <md-card-title-text>
                        <span class="md-headline">
                            1. Primary contact for this application
                        </span>
                    </md-card-title-text>
                </md-card-title>

                <md-card-content>
                    <div layout="row">
                        <md-input-container flex="50">
                            <label>Name</label>
                            <input
                                type="text"
                                required
                                name="name"
                                ng-model="vm.form.person_name"
                            />
                            <div ng-messages="vm.ednaform.name.$error">
                                <div ng-message="required">
                                    This is required.
                                </div>
                            </div>
                        </md-input-container>
                        <md-input-container flex="50">
                            <label>Email</label>
                            <input
                                type="email"
                                required
                                name="email"
                                ng-model="vm.form.email"
                            />
                            <div ng-messages="vm.ednaform.email.$error">
                                <div ng-message="email">
                                    Please provide a valid email
                                </div>
                                <div ng-message="required">
                                    This is required.
                                </div>
                            </div>
                        </md-input-container>
                    </div>
                </md-card-content>
            </md-card>
            <md-card>
                <md-card-title>
                    <md-card-title-text>
                        <span class="md-headline">2. Name of the installation </span>
                    </md-card-title-text>
                </md-card-title>

                <md-card-content>
                    <div layout="row">
                        <md-input-container flex="50">
                            <label>Name</label>
                            <input
                                type="text"
                                required
                                name="name"
                                ng-model="vm.form.installation_name"
                            />
                            <div ng-messages="vm.ednaform.name.$error">
                                <div ng-message="required">
                                    This is required.
                                </div>
                            </div>
                        </md-input-container>
                    </div>
                </md-card-content>
            </md-card>

            <md-card>
                <md-card-title>
                    <md-card-title-text>
                        <span class="md-headline">3. Type of application</span>
                        <span class="md-subhead">What best describes your application?
                        </span>
                    </md-card-title-text>
                </md-card-title>

                <md-card-content>
                  <md-radio-group ng-model="vm.form.type" ng-change="vm.typeChanged(vm.for.type)" required>
                    <md-radio-button value="National_installation" class="md-primary" ><span>A national installation.</span></md-radio-button>
                    <div style="margin-left: 25px" ng-if="vm.form.type == 'National_installation'">
                      <p>
                        Note that national portals will exclusively be offered to countries participating in GBIF. 
                      </p>
                      <p>Please select which participant country this application relates to. Please see the <a href="/the-gbif-network">list of participants</a> for contact information</p>
                      <div layout="row">
                        <md-input-container flex="50">
                            <label>Click to select</label>
                            <md-select name="participantNode" ng-model="vm.form.participant" required>
                              <md-option ng-repeat="participant in vm.participantCountries" ng-value="participant.key">
                                  {{participant.participantTitle}}
                              </md-option>
                            </md-select>
                        </md-input-container>
                      </div>
                    </div>
                    <md-radio-button value="Multinational_installation" class="md-primary" ><span>A multinational installation.</span></md-radio-button>
                    <div style="margin-left: 25px" ng-if="vm.form.type == 'Multinational_installation'">
                      <div layout="row">
                        <md-input-container flex="100">
                          <label>Please describe which data publisher(s) and/or GBIF participants will be involved</label>
                          <textarea required ng-model="vm.form.multinational_publisher_description" rows="5" md-select-on-focus name="multinational_publisher_description"></textarea>
                      </md-input-container>
                      </div>
                    </div>
                    <md-radio-button value="Group_or_institution_installation" class="md-primary" ><span>An installation for a group or institution within a country.</span></md-radio-button>
                    <div style="margin-left: 25px" ng-if="vm.form.type == 'Group_or_institution_installation'">
                      <div layout="row">
                        <md-input-container flex="100">
                          <label>Please describe which data publisher(s) and/or GBIF participants will be involved</label>
                          <textarea required ng-model="vm.form.group_or_institution_publisher_description" rows="5" md-select-on-focus name="group_or_institution_publisher_description"></textarea>
                      </md-input-container>
                      </div>
                    </div>
                  </md-radio-group>
                </md-card-content>
            </md-card>

<!--             <md-card>
              <md-card-title>
                  <md-card-title-text>
                      <span class="md-headline">4. Are you in contact with a GBIF Participant Node Manager about this application?</span>
                      </span>
                  </md-card-title-text>
              </md-card-title>

              <md-card-content>
                <md-radio-group ng-model="vm.form.node_contact">
                  <md-radio-button value="I_am_the_node_manager" class="md-primary" ><span>I am the Node Manager</span></md-radio-button>
                  <md-radio-button value="Node_manager_contacted" class="md-primary" ><span>Yes, I am in contact with a Node Manager about this application</span></md-radio-button>
                  <div style="margin-left: 25px" ng-if="vm.form.node_contact == 'Node_manager_contacted'">
                    <div layout="row">
                      <md-input-container flex="50">
                        <label>Please state which Node Manager</label>
                        <input
                          type="text"
                          required
                          name="node_manager"
                          ng-model="vm.form.node_manager"
                        />
                        <div ng-messages="vm.ednaform.node_manager.$error">
                          <div ng-message="required">
                              This is required.
                          </div>
                        </div>
                      </md-input-container>
                    </div>
                  </div>
                  <md-radio-button value="No_contact_to_node_manager" class="md-primary" ><span>I have not yet contacted a Node Manager about this application</span></md-radio-button>
                </md-radio-group>
              </md-card-content>
          </md-card> -->

            <div>
                <md-card>
                    <md-card-title>
                        <md-card-title-text>
                            <span class="md-headline">4. Description of the anticipated content providers</span>
                            
                        </md-card-title-text>
                    </md-card-title>
                    <md-card-content>
                        <div layout="row">
                              <md-input-container flex="100">
                                <label>Please describe who you anticipate publishing data, and if you already have publishers ready to use the service.</label>
                                <textarea required ng-model="vm.form.content_providers" rows="5" md-select-on-focus name="organizationDescription"></textarea>
                            </md-input-container>
                        </div>
                    </md-card-content>
                </md-card>
               
                <md-card>
                    <md-card-title>
                        <md-card-title-text>
                            <span class="md-headline">5. Timelines</span>
                            <span class="md-subhead">
                              Are there any timelines you need to keep with regards to the deployment, promotion and ongoing use of the portal?
                            </span>
                        </md-card-title-text>
                    </md-card-title>
                    <md-card-content>
                        <div layout="row">
                              <md-input-container flex="100">
                                <label>Description of timelines</label>
                                <textarea ng-model="vm.form.timelines" rows="5" md-select-on-focus name="organizationDescription"></textarea>
                            </md-input-container>
                        </div>
                    </md-card-content>
                </md-card>

            <md-card>
                <md-card-title>
                    <md-card-title-text>
                        <span class="md-headline">Terms</span>
                    </md-card-title-text>
                </md-card-title>

                <md-card-content>
                  <md-checkbox ng-model="vm.form.terms_accepted" class="md-primary m-b-0" required><span>
                    I have read the service agreement and data processor agreement and I accept these terms and conditions for the hosted eDNA Tool I will use.
                  </span></md-checkbox>
                </md-card-content>
            </md-card>
            </div>

            <button ng-disabled="!vm.ednaform.$valid || vm.state == 'PENDING'" type="submit"
                    ng-click="vm.createSuggestion(vm.form)"
                    class="btn btn-default flat">
                Submit
            </button>
            <div class="text-error" ng-if="vm.state == 'FAILED'">
                <div>
                  This isn't good. We weren't able to save your application. Please try again later. You are also welcome to send it to helpdesk@gbif.org and include the data below. It saves you having to write it all again.
                </div>
                <code>
                  <pre>
                    {{vm.form}}
                  </pre>
                </code>
            </div>
        </form>
    </div>
</div>
